<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'/>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <link rel="stylesheet" type="text/css" media="screen" href="./stylesheets/stylesheet.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="./stylesheets/table.css"/>
    <script type="text/javascript" src="./js/main.js"></script>
    <title>About Rule Classes</title>
  </head>
  <body>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
      <header class="inner">
          <h1 id="project_title">About Rule Classes</h1>
      </header>        <div id="menu" class="outer">
          <nav class="inner">
            <a href="./">Home</a>
            <a href="./documentation">Documentation</a>
            <a href="./publications">Publications</a>
            <a href="./experiments1">Experiments</a>
            <a href="./downloads">Downloads</a>
            <a href="https://github.com/graphik-team/graal/">Sources</a>
          </nav>
        </div>
    </div>
    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="toc" class="inner">
		<ul>
			<li><a href='#structures'>Structures</a></li>
			<ul>
				<li><a href='#grd'>Graph of rule dependencies</a></li>
				<li><a href='#gp'>Graph of position dependencies</a></li>
				<li><a href='#marked'>Marked variable set</a></li>
				<li><a href='#affected'>Affected position set</a></li>
			</ul>
			</li>
			<li><a href='#rc'>Rule classes</a>
			<ul>
				<li><a href='#abstract'>Abstract rule classes</a>
				<ul>
						<li><a href='#fes'>Finite expansion set</a></li>
						<li><a href='#fus'>Finite unification set</a></li>
						<li><a href='#bts'>(Greedy) Bounded treewidth set</a></li>
				</ul>
				</li>
				<li><a href='#concrete'>Concrete rule classes</a>
				<ul>
						<li><a href='#agrd'>Acyclic graph of rule dependencies</a></li>
						<li><a href='#dlg'>Datalog</a></li>
						<li><a href='#disc'>Disconnected</a></li>
						<li><a href='#dr'>Domain-restricted</a></li>
						<li><a href='#fg'>Frontier-guarded</a></li>
						<li><a href='#fr1'>Frontier-one</a></li>
						<li><a href='#g'>Guarded</a></li>
						<li><a href='#lin'>Linear</a></li>
						<li><a href='#rr'>Range-restricted</a></li>
						<li><a href='#s'>Sticky</a></li>
						<li><a href='#wa'>Weakly-acyclic</a></li>
						<li><a href='#wfg'>Weakly-frontier-guarded</a></li>
						<li><a href='#wg'>Weakly-guarded</a></li>
						<li><a href='#ws'>Weakly-sticky</a></li>
				</ul>
				</li>
			</ul>
			</li>
		</ul>
      </section>
      <section id="structures" class="inner">
        <a name="structures"></a>
		<h2>Structures</h2>
        <p>
          The following structures are used by the analyzer for checking some rule classes.
		  Furthermore the graph of rule dependencies is also used in the
		  combination step to compute rule base subsets (corresponding to its strongly connected
		  components).
        </p>
		<a name="grd"></a>
        <h4>Graph of rule dependencies</h4>
		<p>
		  The graph of rule dependencies (GRD) is a directed graph built from a rule
		  set as follows:
		  there is a vertex for each rule in the set and there is an edge from a
		  rule R<sub>1</sub> to a rule R<sub>2</sub> if R<sub>1</sub> <i>may
			lead to trigger</i> R<sub>2</sub>, i.e., R<sub>2</sub> depends on R<sub>1</sub>.
		  R<sub>2</sub> depends on R<sub>1</sub> if and only if there is piece-unifier
		  (for this notion, see f.i. <a href="http://www.lirmm.fr/~mugnier/ArticlesPostscript/BLMSDecidabilityLine-PreAIJ2011.pdf">
			this paper</a>) <!--(without the <i>atom erasing</i> check) -->
		  between the body of R<sub>2</sub> and the head of R<sub>1</sub>.
		</p>
		<a name="gpos"></a>
        <h4>Graph of Position Dependencies</h4>
		The graph of position dependencies noted G<sub>pos</sub> is a directed graph
		built from a rule set as follows:
		first, for each predicate p and for each of its positions p[i] a vertex is
		added.
		Then, for each rule and for each variable x that occurs at some position p[i] in the rule
		body: (1) for each position r[j] where x also occurs in the rule head, a
		<i>normal</i> edge is added
		from p[i] to r[j], and (2) for each position q[k] in the rule head where some
		existentially quantified variable appears, a <i>special</i> edge is added
		from p[i] to q[k].
		<p></p>
		<p>In this graph, a vertex (hence a predicate position) is of <i>finite
			rank</i> if there is no circuit containing a special edge and passing
		  through this vertex.
		</p>
		<a name="marked"></a>
        <h4>Marked Variable Set</h4>
		<p>
		  The marked variable set is built from a rule set by the
		  following marking procedure:<br>
		  (i) for each rule R<sub>i</sub> and for each variable v occuring in
		  its body, if v does not occur in all atoms of its head, mark (each occurrence of) v in its body;<br>
		  (ii) apply until a fixpoint is reached: for each rule R<sub>i</sub>, if a marked variable v appears at position p[k] in its body,
		  then for each rule R<sub>j</sub> (including
		  i = j) and for each variable x appearing at position p[k] in the head of R<sub>j</sub>,
		  mark each occurence of x in the body of R<sub>j</sub>.
		</p>
		<a name="gpos"></a>
        <h4>Affected Position Set</h4>
		<p>
		  The affected position set is built from a rule set
		  by the following procedure:<br>
		  (i) for each rule and for each existentially quantified variable occuring
		  at position p[i] in its head, p[i] is affected;<br>
		  (ii) for each rule and for each variable x that occurs <i>only</i>
		  at affected positions in its body, all positions q[j] in its head where occurs x are
		  affected.
		</p>
		<p>A variable is said to be <i>affected</i> if it occurs only at affected
		  positions.
		</p>
	  </section>
		<section id="rc" class="inner">
        <a name="rc"></a>
		<h2>Rule Classes</h2>
        <p>
           <img src="./images/rc_inclusion.png" class="right" />
		The rule classes are divided into two types: <i>abstract</i> classes, which ensure
		 decidability but are not recognizable, i.e., one cannot always determine if a set for rules belongs to such a class,
		 and <i>concrete</i> classes, which may specialize one or
		several abstract classes and are recognizable by syntactic properties.
		</p>
        <p>
		In the figure on the right side, rule classes are ordered by inclusion:
		an edge between two classes means that the above one includes the one below.
		If there is no edge between two classes, it means there are incomparable.
		Note that a class was omitted in this picture for the sake of readability:
		 <i>disconnected</i> rules, which are
		<i>fes</i>, <i>fus</i> and <i>gbts</i>, and are a specialization of
		<i>domain-restricted</i>, <i>weakly-acyclic</i> and <i>frontier-guarded</i>
		rules.
		</p>
        <p>
		Finally, some classes present in this figure are not implemented for now in the
		analyzer, hence they are not described below. These classes are the following:</p>
		<ul>
			<li>weakly-sticky-join (w-sticky-j)</li>
			<li>sticky-join (sticky-j)</li>
			<li>glut-frontier-guarded (glut-fg)</li>
			<li>jointly-frontier-guarded (j-fg)</li>
			<li>jointly-acyclic (ja).</li>
		</ul>
        <a name="abstract"></a>
		<h3>Abstract Rule Classes</h3>
		<p>
		These rule classes are said <em>abstract</em> because they
		have no syntactic property and are used to classify concrete
		classes. Each of these classes ensures the existence of
		query mechanisms that halt in finite time for any query.
		Determining if a rule (or a set of rules) belongs to one
		of these abstract classes is an undecidable problem.
		</p>
            <a name="fes"></a>
			<h4>Finite expansion set (fes)</h4>
			<p>This abstract class ensures the finiteness of <em>forward
chaining</em> algorithms that saturate facts until the halting
condition is satisfied and check if the query maps to the obtained
facts.</p>
            <a name="fus"></a>
			<h4>Finite unification set (fus)</h4>
			<p>This abstract class ensures the finiteness of any <em>backward
chaining</em> algorithm thath rewrites the query in a breadth-first
manner while maintaining a set of the <em>most general
rewritings</em> and answers 'yes' if an element of this set maps to
the facts.</p>
            <a name="bts"></a>
			<h4>(Greedy) Bounded treewidth set (bts)</h4>
			<p>The BTS class, which strictly includes FES, ensures decidability,
although there is currently no algorithm available for this class.
However, <em>Greedy Bounded Treewidth Set (GBTS)</em> is an
expressive subclass of BTS that is provided with a forward chaining
like halting algorithm. Note that, except for <em>glut-fg</em>
(cf. Figure), all currently known BTS but not FES classes are GBTS.</p>
        <a name="concrete"></a>
		<h3>Concrete Rule Classes</h3>
		<p>
		These classes are presented with their syntactic property
		and the abstract classes they belong to.
		</p>
		<p>
		There are two kinds of syntactic properties:
		<ul>
		<li><strong>local properties</strong> which are checked on
		each rule independently from the others (hence a set fulfils
		a local property if all of its rules fullfil it);</li>
		<li><strong>global properties</strong> which are checked on
		the set of rules (note that the analyser may <em>cut</em> the set
		into subsets of rules thanks to the <a href='#grd'>graph of
		rule dependencies</a> strongly connected components).
		</ul>
		</p>
		<p>
		Reminder: the <em>frontier</em> of a rule is the set of
		variables shared by its body and its head.
		<p>
            <a name="agrd"></a>
			<h4>Acyclic graph of rule dependencies (agrd)</h4>
				<p>This rule class property is a global property.<br/>
				Ensures:
				<ul>
						<li>fes</li>
						<li>fus</li>
				</ul>
				</p>
				<p>The associated <a href='#grd'>graph of rule dependencies</a> does
not contain any circuit.</p>
            <a name="dlg"></a>
			<h4>Datalog (dlg)</h4>
				See <a ref='#rr'>Range-restricted</a>.
            <a name="disc"></a>
			<h4>Disconnected (disc)</h4>
				<p>This rule class property is a local property.<br/>
				Ensures:
				<ul>
						<li>fes</li>
						<li>fus</li>
						<li>gbts</li>
				</ul>
				</p>
				<p>The frontier is empty. Note that any disconnected rule needs to be
applied only once.</p>
            <a name="dr"></a>
			<h4>Domain-restricted (dr)</h4>
				<p>This rule class property is a local property.<br/>
				Ensures:
				<ul>
						<li>fus</li>
				</ul>
				</p>
				<p>All atoms in the head contain either all or none variables from the
body.</p>
            <a name="fg"></a>
			<h4>Frontier-guarded (fg)</h4>
				<p>This rule class property is a local property.<br/>
				Ensures:
				<ul>
						<li>gbts</li>
				</ul>
				</p>
				<p>At least one atom in the body contains all the variables from the
frontier.</p>
            <a name="fr1"></a>
			<h4>Frontier-one (fr1)</h4>
				<p>This rule class property is a local property.<br/>
				Ensures:
				<ul>
						<li>gbts</li>
				</ul>
				</p>
				<p>The frontier contains only one variable.</p>
            <a name="g"></a>
			<h4>Guarded (g)</h4>
				<p>This rule class property is a local property.<br/>
				Ensures:
				<ul>
						<li>gbts</li>
				</ul>
				</p>
				<p>At least one atom in the body (called a <em>guard</em>) contains
all the variable from the body.</p>
            <a name="lin"></a>
			<h4>Linear (lin)</h4>
				<p>This rule class property is a local property.<br/>
				Ensures:
				<ul>
						<li>fus</li>
						<li>gbts</li>
				</ul>
				</p>
				<p>The body contains only a single atom.</p>
            <a name="rr"></a>
			<h4>Range-restricted (rr)</h4>
				<p>This rule class property is a local property.<br/>
				Ensures:
				<ul>
						<li>fes</li>
						<li>gbts</li>
				</ul>
				</p>
				<p>All variables that appear in the in the head also occur in the
body.</p>
            <a name="s"></a>
			<h4>Sticky (s)</h4>
				<p>This rule class property is a global property.<br/>
				Ensures:
				<ul>
						<li>fus</li>
				</ul>
				</p>
				<p>Each marked variable occurs at most once in a rule body (cf. <a
href='#marked'>marked variable set</a>).</p>
            <a name="wa"></a>
			<h4>Weakly-acyclic (wa)</h4>
				<p>This rule class property is a global property.<br/>
				Ensures:
				<ul>
						<li>fes</li>
				</ul>
				</p>
				<p>All predicate positions in the <a href='#gp'>graph of position
dependencies</a> have finite rank (i.e., there is no circuit with
special edge).</p>
            <a name="wfg"></a>
			<h4>Weakly-frontier-guarded (wfg)</h4>
				<p>This rule class property is a global property.<br/>
				Ensures:
				<ul>
						<li>gbts</li>
				</ul>
				</p>
				<p>At least one atom in the body of each rule contains all affected
variable from the frontier
(cf. <a href='#affected'>affected position set</a>).</p>
            <a name="wg"></a>
			<h4>Weakly-guarded (wg)</h4>
				<p>This rule class property is a global property.<br/>
				Ensures:
				<ul>
						<li>gbts</li>
				</ul>
				</p>
				<p>At least one atom in the body of each rule contains all affected
variables from the body
(cf. <a href='#affected'>affected position set</a>).</p>
            <a name="ws"></a>
			<h4>Weakly-sticky (ws)</h4>
				<p>This rule class property is a global property.<br/>
				Ensures:
				<ul>
				</ul>
				</p>
				<p>This class does not belong to any abstract class defined earlier.
It is a generalisation of <a href='#s'>Sticky</a> and
<a href='#wa'>Weakly-Acyclic</a>. It relies upon the same
<a href='#gp'>graph of position dependencies</a> as the
<a href='#wa'>Weakly-Acyclic</a> test and upon the same
<a href='#marked'>marking procedure</a> as the <a
href='#s'>Sticky</a> test.
All marked variables that occur more than once in a rule body appear
at some position of finite rank.</p>
	    </section>
    </div>
    <!-- FOOTER -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <a href="mailto:sympa@lirmm.fr?subject=SUBSCRIBE graal">Subscribe to Graal newsletter</a>
        <p class="copyright">Graal maintained
        by <a href="https://team.inria.fr/graphik/">GraphIK</a>
          team</p>
        <p> Contacts:
        <script type="text/javascript">
        <!-- //encodage de l'adresse email
                Rot17.write('<r yivw="drzckf:jzgzvkvi@czidd.wi">jzgzvkvi@czidd.wi</r>');
                document.write(' ');
          Rot17.write('<r yivw="drzckf:dlxezvi@czidd.wi">dlxezvi@czidd.wi</r>');
     -->
        </script></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
    <!-- Piwik -->
    <script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="//info-demo.lirmm.fr/analytics/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', 1]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <noscript><p><img src="//info-demo.lirmm.fr/analytics/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
    <!-- End Piwik Code -->
  </body>
</html>
