<?xml version="1.0"?>
<!-- build.xml -->


<project name="graal"
         basedir="."
         default="jar">


	<!-- properties -->

	<property name="name"			value="graal"/>
	<property name="doc-window"     value=""/>
	<property name="doc-title"      value=""/>
	<property name="doc-header"     value=""/>
	<property name="doc-footer"     value=""/>
	<property name="doc-bottom"     value=""/>


<property name="lib" value="lib/annotations-2.0.3.jar:lib/annotations-2.0.3.jar:lib/blueprints-core-2.6.0.jar:lib/commons-csv-1.0.jar:lib/commons-lang3-3.3.2.jar:lib/concurrentlinkedhashmap-lru-1.3.1.jar:lib/dlgp2-parser-1.0.0.jar:lib/geronimo-jta_1.1_spec-1.1.1.jar:lib/guava-17.0.jar:lib/guice-4.0-beta.jar:lib/guice-multibindings-4.0-beta.jar:lib/hppc-0.6.0.jar:lib/hsqldb-2.3.2.jar:lib/httpclient-4.2.6.jar:lib/httpclient-4.4.jar:lib/httpclient-cache-4.2.6.jar:lib/httpcore-4.2.5.jar:lib/httpcore-4.4.jar:lib/jackson-annotations-2.2.3.jar:lib/jackson-annotations-2.3.0.jar:lib/jackson-core-2.2.3.jar:lib/jackson-core-2.3.3.jar:lib/jackson-databind-2.2.3.jar:lib/jackson-databind-2.3.3.jar:lib/javax.inject-1.jar:lib/jcl-over-slf4j-1.7.6.jar:lib/jcommander-1.35.jar:lib/jena-arq-2.12.1.jar:lib/jena-arq-2.13.0.jar:lib/jena-core-2.12.1.jar:lib/jena-core-2.13.0.jar:lib/jena-iri-1.1.1.jar:lib/jena-iri-1.1.2.jar:lib/jena-tdb-1.1.1.jar:lib/jettison-1.3.3.jar:lib/jgrapht-core-0.9.0.jar:lib/jsonld-java-0.5.0.jar:lib/jsonld-java-0.5.1.jar:lib/jsr305-2.0.1.jar:lib/libthrift-0.9.1.jar:lib/libthrift-0.9.2.jar:lib/logback-classic-1.1.3.jar:lib/logback-core-1.1.3.jar:lib/lucene-core-3.6.2.jar:lib/neo4j-cypher-2.1.7.jar:lib/neo4j-cypher-commons-2.1.7.jar:lib/neo4j-cypher-compiler-1.9-2.0.3.jar:lib/neo4j-cypher-compiler-2.0-2.0.3.jar:lib/neo4j-cypher-compiler-2.1-2.1.7.jar:lib/neo4j-graph-algo-2.1.7.jar:lib/neo4j-graph-matching-2.1.7.jar:lib/neo4j-kernel-2.1.7.jar:lib/neo4j-lucene-index-2.1.7.jar:lib/neo4j-primitive-collections-2.1.7.jar:lib/opencsv-2.3.jar:lib/org.apache.commons.io-2.4.jar:lib/owlapi-apibinding-4.0.1.jar:lib/parboiled-core-1.1.6.jar:lib/parboiled-scala_2.10-1.1.6.jar:lib/scala-library-2.10.4.jar:lib/sesame-http-client-2.8.0.jar:lib/sesame-http-protocol-2.8.0.jar:lib/sesame-model-2.7.11.jar:lib/sesame-model-2.8.0.jar:lib/sesame-query-2.8.0.jar:lib/sesame-queryalgebra-evaluation-2.8.0.jar:lib/sesame-queryalgebra-model-2.8.0.jar:lib/sesame-queryparser-api-2.8.0.jar:lib/sesame-queryparser-sparql-2.8.0.jar:lib/sesame-queryresultio-api-2.8.0.jar:lib/sesame-queryresultio-sparqlxml-2.8.0.jar:lib/sesame-repository-api-2.8.0.jar:lib/sesame-repository-sail-2.8.0.jar:lib/sesame-repository-sparql-2.8.0.jar:lib/sesame-rio-api-2.7.11.jar:lib/sesame-rio-api-2.8.0.jar:lib/sesame-rio-ntriples-2.8.0.jar:lib/sesame-rio-trig-2.8.0.jar:lib/sesame-rio-turtle-2.8.0.jar:lib/sesame-sail-api-2.8.0.jar:lib/sesame-sail-inferencer-2.8.0.jar:lib/sesame-sail-memory-2.8.0.jar:lib/sesame-util-2.7.11.jar:lib/sesame-util-2.8.0.jar:lib/slf4j-api-1.7.7.jar:lib/sqlite-jdbc-3.7.2.jar:lib/trove4j-3.0.3.jar" />
	<property name="lib-test"		value="${lib}:lib/junit-4.11.jar"/>

	<property name="src"
	value="graal/graal-api/src/main/java:graal/graal-backward-chaining/src/main/java:graal/graal-core/src/main/java:graal/graal-forward-chaining/src/main/java:graal/graal-homomorphism/src/main/java:graal/graal-io/graal-io-owl/src/main/java:graal/graal-io/graal-io-dlgp/src/main/java:graal/graal-io/graal-io-sparql/src/main/java:graal/graal-rules-analyser/src/main/java:graal/graal-store/graal-store-blueprints/src/main/java:graal/graal-store/graal-store-jenaTDB/src/main/java:graal/graal-store/graal-store-neo4j/src/main/java:graal/graal-store/graal-store-openrdf/src/main/java:graal/graal-store/graal-store-rdbms/src/main/java:graal/graal-util/src/main/java:graal-apps/graal-converter/src/main/java:graal/graal-io/graal-io-ruleml/src/main/java:graal-apps/graal-tools/src/main/java:graal-incubator/graal-io-iris-dtg/src/main/java:graal-apps/kiabora/src/main/java" />
	<property name="src-test"       value="src/test/java"/>

	<property name="target"         value="target"/>
	<property name="target-build"   value="${target}/build"/>
	<property name="target-test"    value="${target}/tests"/>
	<property name="target-release" value="${target}/release"/>
	<property name="target-doc"     value="${target}/release/doc"/>

	<!-- end properties -->


	<!-- prebuild step -->
	<target name="pre">
		<mkdir dir="${target-build}"/>
		<mkdir dir="${target-release}"/>
		<mkdir dir="${target-test}"/>
	</target>

	<!-- compile sources (.java) into classes (.class)  -->
	<target name="compile"
	        depends="pre">
		<javac destdir="${target-build}"
		       srcdir="${src}"
			   classpath="${lib}"
			   includeantruntime="false"/>
	</target>

	<!-- compile test source files -->
	<target name="compile-test"
	        depends="compile">
		<javac destdir="${target-test}"
		       srcdir="${src-test}"
			   classpath="${lib-test}:${target-build}"
			   includeantruntime="false"/>
	</target>

	<!-- execute tests -->
	<target name="execute-test"
	        depends="compile-test">
	    <java classpath="${target-build}:${target-test}:${lib-test}" 
	    	  classname="TestRunner"/>
	</target>

	<target name="test"
	        depends="compile-test,execute-test">
	</target>

	<!-- compress classes into a jar file -->
	<target name="jar"
	        depends="compile">
		<jar destfile="${target-release}/${name}.jar"
		     basedir="${target-build}" />
	</target>

	<!-- make javadoc -->
	<target name="doc"
	        depends="compile">
		<javadoc sourcepath="${src}"
		         destdir="${target-doc}"
				 access="private"
				 use="true"
				 doctitle="${doc-title}"
				 header="${doc-header}"
				 footer="${doc-footer}"
				 bottom="${doc-bottom}"/>
	</target>

	<target name="release"
	        depends="jar,test,doc">
		<echo>${name} released!</echo>
	</target>


	<!-- clean outputs -->
	<target name="clean">
		<delete dir="${target-build}"/>
		<delete dir="${target-release}"/>
		<delete dir="${target-test}"/>
	</target>

</project>

